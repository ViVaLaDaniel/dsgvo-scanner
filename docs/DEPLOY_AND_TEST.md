# Руководство по Деплою и Тестированию

> **Примечание:** после внедрения очередей задач (см. [`ROADMAP.md`](./ROADMAP.md)) этот документ будет дополнен инструкциями для worker‑сервиса.

## 1. Исправление ошибки деплоя на Vercel

Главная причина ошибки деплоя (`Error: @supabase/ssr: Your project's URL and API key are required`) — отсутствие переменных окружения в настройках Vercel.

### Как добавить переменные:

1.  Зайдите в панель управления **Vercel** и выберите ваш проект.
2.  Перейдите во вкладку **Settings** (Настройки).
3.  В левом меню выберите **Environment Variables**.
4.  Добавьте следующие две переменные (значения возьмите из вашего проекта в Supabase -> Project Settings -> API):

    *   **Key:** `NEXT_PUBLIC_SUPABASE_URL`
        *   **Value:** `https://ваша-ссылка.supabase.co`
    *   **Key:** `NEXT_PUBLIC_SUPABASE_ANON_KEY`
        *   **Value:** `ваш-anon-ключ`
    *   **Key:** `SCANNER_MICROSERVICE_URL`
        *   **Value:** `https://scanner.n8ndo.es/scan`
    *   **Key:** `SCANNER_SECRET`
        *   **Value:** `ваш-scanner-secret`

5.  После добавления переменных, перейдите во вкладку **Deployments** и перезапустите деплой (Redeploy) последнего коммита. Сборка должна пройти успешно.

---

## 2. Как проверить приложение на ошибки (Linting)

В проект был добавлен инструмент ESLint для автоматической проверки качества кода.

Чтобы проверить проект на ошибки локально, запустите команду в терминале:

```bash
npm run lint
```

Если ошибок нет, команда ничего не выведет (или выведет пустой результат). Если ошибки есть, они будут показаны в терминале с указанием файла и строки.

---

## 3. Руководство по ручному тестированию

Так как приложение требует интеграции с Supabase, полноценное тестирование возможно только при корректно настроенных переменных окружения (`.env.local` локально или в Vercel).

### Базовый сценарий проверки (Smoke Test):

1.  **Регистрация / Вход:**
    *   Откройте приложение (например, `https://ваш-проект.vercel.app` или `http://localhost:3000`).
    *   Нажмите "Get Started" или "Login".
    *   Попробуйте зарегистрировать нового пользователя. Проверьте, что после регистрации вас перенаправляет в Dashboard.
    *   Выйдите из системы и попробуйте войти снова.

2.  **Dashboard (Панель управления):**
    *   Убедитесь, что статистика загружается (даже если там нули).
    *   Проверьте отображение лимита сайтов (информация берется из базы данных).

3.  **Управление сайтами:**
    *   Перейдите в раздел "Добавить сайт" (кнопка "Neue Website" или плюсик).
    *   Введите URL (например, `https://google.com`) и имя клиента.
    *   Нажмите "Hinzufügen". Сайт должен появиться в списке снизу.
    *   Если сайт появился — связь с базой данных работает.

4.  **Функции сканирования:**
    *   На карточке добавленного сайта нажмите "Jetzt scannen".
    *   Должно появиться уведомление о запуске сканирования (сейчас это заглушка/имитация, но подтверждает работу UI).

5.  **Удаление:**
    *   Попробуйте удалить добавленный сайт (иконка корзины).
    *   Подтвердите удаление. Сайт должен исчезнуть из списка.

Если все эти шаги проходят без ошибок ("красных экранов" или зависаний), основная функциональность приложения работает исправно.
