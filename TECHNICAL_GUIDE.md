# üõ°Ô∏è DSGVO Scanner - Technical Documentation

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–∞
**DSGVO Scanner** ‚Äî —ç—Ç–æ SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ –≤–µ–±-—Å–∞–π—Ç–æ–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º—É —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É –ø–æ –∑–∞—â–∏—Ç–µ –¥–∞–Ω–Ω—ã—Ö (GDPR/DSGVO). –°–∏—Å—Ç–µ–º–∞ –∏–º–∏—Ç–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é headless-–±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–∫—Ä—ã—Ç—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π.

---

## üèóÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫
- **Frontend:** Next.js 15+ (App Router), React 19, TypeScript.
- **Styling:** Tailwind CSS 4, Shadcn/UI (–ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞).
- **Backend/DB:** Supabase (Auth, PostgreSQL, Row Level Security).
- **Scanner Engine:** Playwright (Chromium) –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
- **Reporting:** `@react-pdf/renderer` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ White-Label PDF-–æ—Ç—á–µ—Ç–æ–≤.
- **Infrastructure:** Vercel (Deployment), GitHub Actions (CI/CD).

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (File Map)

### 1. –Ø–¥—Ä–æ –°–∏—Å—Ç–µ–º—ã (`/lib`)
- `lib/scan-engine.ts` ‚Äî **–°–µ—Ä–¥—Ü–µ –ø—Ä–æ–¥—É–∫—Ç–∞**. –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–µ—Ä–µ—Ö–≤–∞—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (Network Interception), –∞–Ω–∞–ª–∏–∑ Cookies –∏ —Ä–∞—Å—á–µ—Ç Risk Score.
- `lib/supabase/` ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ Supabase (–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∏ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏–∏).

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`/components`)
- `components/ui/` ‚Äî –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (Shadcn).
- `components/reporting/` ‚Äî –ú–æ–¥—É–ª–∏ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤.
  - `ScanReportPDF.tsx` ‚Äî –®–∞–±–ª–æ–Ω PDF-–¥–æ–∫—É–º–µ–Ω—Ç–∞.
  - `DownloadReportButton.tsx` ‚Äî –õ–æ–≥–∏–∫–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

### 3. –°—Ç—Ä–∞–Ω–∏—Ü—ã (`/app`)
- `app/dashboard/` ‚Äî –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `app/dashboard/websites/` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º —Å–∞–π—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤.
- `app/dashboard/settings/` ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ **White-Label** (–±—Ä–µ–Ω–¥–∏–Ω–≥).
- `app/impressum/` & `app/datenschutz/` ‚Äî –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Spain-Safe Strategy).

### 4. –¢–∏–ø—ã –∏ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö (`/types`, `/supabase`)
- `types/supabase.ts` ‚Äî TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ —Å—Ö–µ–º–æ–π –ë–î.
- `supabase/schema.sql` ‚Äî –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü, RLS-–ø–æ–ª–∏—Ç–∏–∫–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã.
- `supabase/phase3_agencies.sql` ‚Äî –û–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞–≥–µ–Ω—Ç—Å–∫–æ–≥–æ –±—Ä–µ–Ω–¥–∏–Ω–≥–∞.

---

## ‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–∫–∞–Ω–µ—Ä (Deep Dive)

### –ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ (`analyzeWebsite`):
1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:** –ó–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ Chromium —á–µ—Ä–µ–∑ Playwright.
2. **–ü–µ—Ä–µ—Ö–≤–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (Interception):**
   - –°–ª—É—à–∞—Ç–µ–ª—å `page.on('request')` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π URL –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º (Google Fonts, GTM, GA –∏ –¥—Ä.).
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.
3. **–≠–º—É–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - **Auto-scroll:** –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ –∫–æ–Ω—Ü–∞, —á—Ç–æ–±—ã —Å—Ä–∞–±–æ—Ç–∞–ª–∏ Lazy Loading —à—Ä–∏—Ñ—Ç—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã.
   - **Wait:** –û–∂–∏–¥–∞–Ω–∏–µ `networkidle`, –∫–æ–≥–¥–∞ —Å–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É—Ç–∏—Ö–∞–µ—Ç.
4. **–ê–Ω–∞–ª–∏–∑ Cookies:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫—É–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö *–¥–æ* —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –Ω–∞–∂–∞—Ç—å "–ü—Ä–∏–Ω—è—Ç—å" –Ω–∞ –±–∞–Ω–Ω–µ—Ä–µ.
5. **Scoring:** –†–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ—Ç 0 –¥–æ 100 –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –Ω–∞—Ä—É—à–µ–Ω–∏–π.

---

## üíº White-Label & Multi-Tenancy
–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –∞–≥–µ–Ω—Ç—Å—Ç–≤:
- **–¢–∞–±–ª–∏—Ü–∞ `agencies`:** –•—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–µ–Ω–¥–∞ (–ª–æ–≥–æ—Ç–∏–ø, Hex-–∫–æ–¥ —Ü–≤–µ—Ç–∞, —Ñ—É—Ç–µ—Ä).
- **RLS (Row Level Security):** –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –∏—Ö –≤–ª–∞–¥–µ–ª—å—Ü—É (`owner_id = auth.uid()`).
- **PDF-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è:** –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–µ–Ω–¥–∏–Ω–≥–∞.

---

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:** `npm run dev` –∏ `npx supabase start`.
    - *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è Windows:* –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ 502, –æ—Ç–∫–ª—é—á–∏—Ç–µ `analytics` –≤ `supabase/config.toml`.
- **–¢–µ—Å—Ç—ã (Vitest):** `npm test`. –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `__tests__/unit/`. –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è Playwright, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏–∫—É –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞.
- **–°–±–æ—Ä–∫–∞:** `npm run build` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ Vercel).

---

## üöÄ –ë—É–¥—É—â–µ–µ (Roadmap)
1. **AI Impressum Validator:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–∞–π—Ç–µ.
2. **Paddle Integration:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–ª–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏.
3. **Advanced Cookies Analysis:** –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫—É–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (Marketing, Functional, Necessary).

---
*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞ 27.01.2026. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: Antigravity.*
